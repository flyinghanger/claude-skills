---
name: content-pipeline
description: 内容生产流水线。支持文章写作、Fact Check、10维评分、全流程串联、标准进化。当用户请求"写文章"、"评分"、"fact check"、"内容流水线"时使用。
argument-hint: <markdown_file> <stage: draft|fact-check|score|full|evolve>
user-invocable: true
allowed-tools: Bash, Read, Write, Edit, WebFetch, WebSearch, Grep, Glob
---

# 内容生产流水线

从想法到发布的五阶段内容生产系统，内置可进化的质量标准。

## 使用方法

```bash
/content-pipeline <file.md> draft        # 读标准+素材，写初稿
/content-pipeline <file.md> fact-check   # 逐条核查事实
/content-pipeline <file.md> score        # 10维评分 + 修改建议 + 执行修改
/content-pipeline <file.md> full         # 依次执行 draft → fact-check → score
/content-pipeline <file.md> evolve       # 发布后回填数据，更新标准
```

## 核心文件

| 文件 | 用途 | 说明 |
|------|------|------|
| 写作标准 | `/workspace/group/content-standards.md` | **每次运行必须先读取**。包含写作原则、目标受众、进化日志 |
| 评分标准 | `references/scoring-rubric.md` | 10 维评分的详细定义和判分参考 |
| 文章文件 | 用户指定的 `.md` 文件 | 被操作的目标文章 |

## 执行流程

### Stage: draft（写初稿）

1. **读取标准**：读取 `/workspace/group/content-standards.md` 中的写作原则和目标受众
2. **读取素材**：如果用户提供了素材（对话片段、笔记、要点），全部读取
3. **写初稿**：按写作原则生成文章初稿，写入目标文件
4. **自检**：对照写作原则逐条检查——标题是否像发微信？开头是否三秒认知冲突？是否有跨域类比？
5. **输出**：文章文件 + 自检清单

### Stage: fact-check（事实核查）

> **关键规则**：每次改稿后都必须重新 fact-check，因为改稿会引入新错误。

1. **读取文章**：读取目标文件全文
2. **逐条提取**：列出文章中所有可核查的声明：
   - 人名、职位、公司归属
   - 数字、数据、百分比
   - 引用（直接引语、转述）
   - 时间线、因果关系
   - 技术术语的准确性
3. **交叉验证**：使用 WebSearch / WebFetch 逐条验证
4. **输出核查表**：

| # | 原文表述 | 核查结果 | 来源 | 建议 |
|---|----------|----------|------|------|
| 1 | "23万+ Star" | ✅ 准确（截至2026.02） | GitHub | 保持 |
| 2 | "每7个月翻一倍" | ❌ 应为4-6个月 | METR报告 | 修正 |

5. **执行修正**：对标记为 ❌ 的条目，直接修改文章文件
6. **二次确认**：修改后再扫一遍，确保修正没有引入新问题

### Stage: score（10维评分）

1. **读取文章**和**评分标准**（`references/scoring-rubric.md`）
2. **逐维度打分**：每个维度 0-5 分，必须给出判断依据
3. **输出评分表**：

| 维度 | 判断依据 | 得分 |
|------|----------|------|
| 标题力 | ... | X |
| 开头力 | ... | X |
| ... | ... | ... |
| **合计** | | **XX/50** |

4. **判定**：
   - ≥ 35 分：**可发布**，给出可选的优化建议
   - 30-34 分：**需修改**，给出具体修改建议并执行
   - < 30 分：**需重写**，指出核心问题，给出重写方向

5. **执行修改**：对评分中暴露的问题，直接修改文章
6. **重新打分**：修改后重新评分，确认分数提升

### Stage: full（全流程）

按顺序执行：`draft` → `fact-check` → `score`

每个阶段完成后输出阶段小结，最终输出全流程总结。

### Stage: evolve（标准进化）

> 在文章发布 7 天后执行，用真实数据修正评分标准。

1. **收集数据**：用户提供发布后的真实数据（阅读量、分享率、评论质量等）
2. **对照预判**：将发布前的评分与真实反馈对比
3. **偏差分析**：哪些维度打高了？哪些打低了？
4. **更新标准**：将分析结果写入 `/workspace/group/content-standards.md` 的"进化日志"
5. **调整原则**：如果偏差持续出现（多篇文章同方向偏差），修改写作原则本身

四个进化机制：

| 机制 | 说明 | 操作 |
|------|------|------|
| **实践** | 发布后数据回填 | `evolve` 阶段自动执行 |
| **学习** | 吸收写作书籍/手册 | 用户分享资料后更新 content-standards.md 的"外部学习" |
| **模仿** | 分析优秀案例 | 用户分享案例后更新 content-standards.md 的"参考案例" |
| **交流** | 与其他 Agent 交流 | 未来扩展 |

## 注意事项

- **标准文件必读**：每次运行任何阶段，第一步都是读取 `/workspace/group/content-standards.md`
- **Fact Check 不可跳过**：`full` 流程中 fact-check 不能省略，即使是小改动
- **评分要诚实**：宁可打低不要打高，发布后的数据会检验预判
- **修改要克制**：只改评分暴露的问题，不要顺手"优化"其他部分
- **保留来源**：所有 fact-check 引用的来源都要记录，可用于参考资料
